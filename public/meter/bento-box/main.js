!function(e){function t(t){for(var r,o,l=t[0],c=t[1],s=t[2],m=0,d=[];m<l.length;m++)o=l[m],a[o]&&d.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(u&&u(t);d.length;)d.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,l=1;l<n.length;l++){var c=n[l];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={1:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/bento-box/";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var u=c;i.push([6131,0]),n()}({5659:function(e,t,n){},6131:function(e,t,n){"use strict";n.r(t);n(5659),n(5660),n(245);var r=n(0),a=n.n(r),i=n(111),o=n.n(i),l=n(65),c=n(144),s=n(1),u=n.n(s),m=n(9),d=n.n(m),h=n(11),p=n(22),f=n(213),g=n.n(f),v=n(10),b=function(e){var t=e.selected;return a.a.createElement("img",{className:"checkbox small-margin-right",src:"".concat(window.NationalInstruments.bentoBox.rootUrl,"/images/").concat(t?"checkbox-checked.svg":"checkbox-unchecked.svg")})};b.propTypes={selected:u.a.bool.isRequired},b.defaultProps={selected:!1};var w=b;function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var y=function(e){var t=e.scriptId,n=e.scriptUrl,r=e.parentSelector;return document.querySelector(t)?Promise.resolve():new Promise(function(e){var a=document.createElement("script");a.setAttribute("id",t),a.setAttribute("type","text/javascript"),a.onload=e,a.setAttribute("src",n),document.querySelector(r).appendChild(a)})},S=Object.freeze({scope:"nchannel-scope",fgen:"function-generator",dmm:"digital-multimeter",bode:"bode-analyzer",datalogger:"data-logger",vps:"variable-power-supply",iv:"iv-analyzer",datagenerator:"data-generator",digitalio:"digital-io"}),x=Object.freeze({scope:"Oscilloscope",bode:"Bode Analyzer",iv:"Current-Voltage Analyzer",datalogger:"Data Logger",fgen:"Function and Arbitrary Waveform Generator",dmm:"Digital Multimeter",vps:"Variable Power Supply",datagenerator:"Data Generator",digitalio:"Digital I/O"}),O=Object.freeze({csv:1,tdms:2}),N=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/octet-stream",r=document.createElement("a");window.URL&&"download"in r?(r.href=window.URL.createObjectURL(new Blob([e],{type:n})),r.setAttribute("download",t),document.body.appendChild(r),r.click(),document.body.removeChild(r)):location.href="data:application/octet-stream,"+encodeURIComponent(e)},R=function(e,t){return new Promise(function(n){e.toBlob(function(e){N(e,t),n()})})},j=function(){var e=6e4*(new Date).getTimezoneOffset(),t=E(new Date(Date.now()-e).toISOString().slice(0,-1).split("T"),2),n=t[0],r=t[1],a=E(n.split("-"),3),i=a[0],o=a[1],l=a[2],c=E(r.split(".")[0].split(":"),3);return{year:i,month:o,day:l,hour:c[0],minute:c[1],second:c[2]}},I=function(e){return new Promise(function(t){return setTimeout(t,e)})},T="navigator"in window&&"userAgent"in window.navigator&&window.navigator.userAgent.toLowerCase()||"",M=/iphone/i.test(T)||/ipad/i.test(T)||/ipod/i.test(T),P=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||void 0!==window.safari&&window.safari.pushNotification).toString(),A=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)};function L(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function q(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function z(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function B(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){z(i,r,a,o,l,"next",e)}function l(e){z(i,r,a,o,l,"throw",e)}o(void 0)})}}var H=function(e,t){var n=0;return e.forEach(function(e){t.forEach(function(t){e[t]&&(n+=7*e[t].length)})}),n},U=function(e){var t=e.width,n=void 0===t?893:t,r=e.height,a=document.createElement("canvas");a.width=n,a.height=r;var i=a.getContext("2d");return i.fillStyle="white",i.fillRect(0,0,a.width,a.height),{canvas:a,ctx:i}},_=function(e){var t=e.blob,n=e.ctx,r=e.x,a=e.y,i=e.width,o=e.height;return new Promise(function(e){var l=new Image;l.width=i,l.crossOrigin="Anonymous";var c=URL.createObjectURL(t);l.onload=function(){n.drawImage(l,r,a,i,o),URL.revokeObjectURL(c),e()},l.src=c})},F=function(e){var t=e.node,n=e.ctx,r=e.x,i=void 0===r?10:r,o=e.y,l=void 0===o?0:o,c=e.width,s=void 0===c?873:c,u=e.height;return new Promise(function(e){var r=g.a.renderToStaticMarkup(a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:s,height:u},a.a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n          * {\n            font-family: 'Lato', sans-serif;\n            font-size: 14px;\n            color: #4d4d4d;\n          }\n          table {\n            margin: 10px 0;\n            text-align: left;\n            vertical-align: middle;\n            border-collapse: collapse;\n            white-space: nowrap;\n          }\n          table.full-width {\n            width: 100%;\n          }\n          table, th, td {\n            border: 1px solid ".concat("#828790",";\n          }\n          th, td {\n            height: 24px;\n            border: 2px solid ").concat("#828790",";\n            padding: 2px 4px;\n          }\n          th {\n            background-color: #dfe0df;\n          }\n          th.header {\n            height: 32px;\n          }\n          td.highlight {\n            background-color: #757575;\n            color: #fff;\n            font-size: 24px;\n          }\n          td.text-center {\n            text-align: center;\n          }\n          .width-50 {\n            width: 50%;\n          }\n          .width-33 {\n            width: 33.33%;\n          }\n        ")}}),a.a.createElement("foreignObject",{width:"100%",height:"100%"},a.a.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml"},t)))),o=new Blob([r],{type:"image/svg+xml"}),c=new FileReader;c.onload=function(t){var r=t.target.result,a=new Image;a.width=s,a.crossOrigin="Anonymous",a.onload=function(){n.drawImage(a,i,l,s,u),e()},a.src=r},c.readAsDataURL(o)})},W=function(e){var t=e.dateStr,n=e.timeStr,r=e.ctx,i=e.x,o=e.y;return new Promise(function(e){var l=g.a.renderToStaticMarkup(a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",width:"100",height:"100",opacity:"0.95"},a.a.createElement("defs",null,a.a.createElement("style",{dangerouslySetInnerHTML:{__html:".cls-1{isolation:isolate;}.cls-2{fill:#0560a4;}.cls-2,.cls-3{opacity:0.75;mix-blend-mode:multiply;}.cls-4,.cls-5,.cls-6{fill:#4d74b0;}.cls-4{opacity:0.17;}.cls-5{opacity:0.25;}.cls-6{opacity:0.3;}"}})),a.a.createElement("g",{className:"cls-1"},a.a.createElement("g",{id:"Layer_1","data-name":"Layer 1"},a.a.createElement("rect",{className:"cls-2",width:"100",height:"100"}),a.a.createElement("g",{className:"cls-3"},a.a.createElement("rect",{className:"cls-4",y:"53.76344",width:"12.5",height:"46.23656"}),a.a.createElement("rect",{className:"cls-4",x:"12.5",y:"24.73118",width:"12.5",height:"75.26882"}),a.a.createElement("rect",{className:"cls-5",x:"25",width:"12.5",height:"100"}),a.a.createElement("rect",{className:"cls-4",x:"37.5",y:"32.25806",width:"12.5",height:"67.74194"}),a.a.createElement("rect",{className:"cls-4",x:"50",y:"65.5914",width:"12.5",height:"34.4086"}),a.a.createElement("rect",{className:"cls-6",x:"75",y:"41.93548",width:"12.5",height:"58.06452"}),a.a.createElement("rect",{className:"cls-4",x:"87.5",y:"62.36559",width:"12.5",height:"37.63441"})))),a.a.createElement("foreignObject",{width:"100%",height:"100%"},a.a.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml"},a.a.createElement("div",{style:{paddingTop:27,paddingLeft:7,fontSize:16,color:"#fff"}},a.a.createElement("div",null,t),a.a.createElement("div",null,n)))))),c=new Blob([l],{type:"image/svg+xml"}),s=new FileReader;s.onload=function(t){var n=t.target.result,a=new Image;a.width=100,a.height=100,a.crossOrigin="Anonymous",a.onload=function(){r.drawImage(a,i,o,100,100),e()},a.src=n},s.readAsDataURL(c)})},V=function(){var e=B(regeneratorRuntime.mark(function e(t,n,r){var i,o,l,c,s,u,m,d,h,f,g,v,b,w,E,y,S,x,O,N,R,j,I,T,M,P,A;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t.channel0Settings,o=t.channel1Settings,l=[i.mode,o.mode].filter(function(e){return"Static"===e}).length,c=[i.mode,o.mode].filter(function(e){return"Sweep"===e}).length,s=[i.mode,o.mode].filter(function(e){return"Custom"===e}).length,u=null!==i.graph&&null!==o.graph,m=110,w=l*(h=270)+c*(d=360)+s*((f=300)+(g=u?500:0)+(v=30))+((b=[i,o]).length-c-s-l)*m+5+5,E=Math.max(H([i],["sourceFile"]),H([i],["sourceChannel"])),y=Math.max(H([o],["sourceFile"]),H([o],["sourceChannel"])),S=470+Math.max(E,y),x=U({width:S,height:w}),O=x.canvas,N=x.ctx,R=5,j=0;case 19:if(!(j<b.length)){e.next=34;break}if(I=b[j],T=I.mode,M=I.graph,P=q(I,["mode","graph"]),A="Sweep"===T?d:"Static"===T?h:"Custom"===T?f:m,"Custom"!==T||!u){e.next=28;break}return e.next=25,_({blob:M,ctx:N,x:10,y:R,width:400,height:g});case 25:return e.next=27,F({node:a.a.createElement(a.a.Fragment,null,a.a.createElement("h1",null,"Graph: Channel ",j+1)),ctx:N,x:30,y:R-10,width:370,height:v});case 27:R+=g;case 28:return e.next=30,F({node:a.a.createElement(a.a.Fragment,null,a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:2,className:"header"},"Channel ",parseInt(j)+1))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"Mode"),a.a.createElement("td",null,T)),Object.entries(P).map(function(e){var t=D(e,2),n=t[0],r=t[1];return a.a.createElement("tr",{key:n},a.a.createElement("td",null,Object(p.startCase)(n)),a.a.createElement("td",null,r))})))),ctx:N,x:10,y:R,width:S,height:A});case 30:R+=A;case 31:++j,e.next=19;break;case 34:return e.next=36,W({dateStr:n,timeStr:r,ctx:N,x:S-100,y:w-5-100});case 36:return e.abrupt("return",{canvas:O,canvasHeight:w,name:"fgen"});case 37:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),Y=function(){var e=B(regeneratorRuntime.mark(function e(t,n,r){var i,o,l,c,s,u,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.mode,o=t.result,l=t.rangeValue,s=U({width:470,height:c=300}),u=s.canvas,m=s.ctx,e.next=5,F({node:a.a.createElement(a.a.Fragment,null,a.a.createElement("table",{className:"full-width",style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:2,className:"header"},"Measurements")),a.a.createElement("tr",null,a.a.createElement("th",{className:"width-50"},"Type"),a.a.createElement("th",{className:"width-50"},"Value"))),a.a.createElement("tbody",null,a.a.createElement("tr",{style:{height:44}},a.a.createElement("td",{className:"width-50"},i),a.a.createElement("td",{className:"highlight text-center width-50"},o)))),a.a.createElement("table",{className:"full-width"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{className:"width-50"},"Settings"),a.a.createElement("th",{className:"width-50"},"Value"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",{className:"width-50"},"Measurements Mode"),a.a.createElement("td",{className:"width-50"},i)),a.a.createElement("tr",null,a.a.createElement("td",{className:"width-50"},"Range"),a.a.createElement("td",{className:"width-50"},l))))),ctx:m,x:40,y:5,width:370,height:c-5-5});case 5:return e.next=7,W({dateStr:n,timeStr:r,ctx:m,x:310,y:c-5-100});case 7:return e.abrupt("return",{canvas:u,canvasHeight:c,name:"dmm"});case 8:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),X=function(){var e=B(regeneratorRuntime.mark(function e(t,n,r){var i,o,l,c,s,u,m,d,f,g,v,b,w;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t.positive,o=t.negative,l={settings:i.settings,readBackValues:i.readBackValues||{}},c={settings:o.settings,readBackValues:o.readBackValues||{}},s=!Object(h.isEmpty)(l.readBackValues),u=!Object(h.isEmpty)(c.readBackValues),m=130,d=250,f=70,g=180+(s?130:0)+(u?130:0),e.t0=l.settings.mode,e.next="Static"===e.t0?12:"Sweep"===e.t0?14:16;break;case 12:return g+=m,e.abrupt("break",17);case 14:return g+=d,e.abrupt("break",17);case 16:g+=f;case 17:e.t1=c.settings.mode,e.next="Static"===e.t1?20:"Sweep"===e.t1?22:24;break;case 20:return g+=m,e.abrupt("break",25);case 22:return g+=d,e.abrupt("break",25);case 24:g+=f;case 25:return v=U({width:470,height:g}),b=v.canvas,w=v.ctx,e.next=28,F({node:a.a.createElement(a.a.Fragment,null,a.a.createElement("table",{className:"full-width",style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:3,className:"header"},"Measurements")),a.a.createElement("tr",null,a.a.createElement("th",{className:"width-33"},"Channel"),a.a.createElement("th",{className:"width-33"},"Measurement"),a.a.createElement("th",{className:"width-33"},"Value"))),a.a.createElement("tbody",null,s&&a.a.createElement(a.a.Fragment,null,a.a.createElement("tr",{style:{height:44}},a.a.createElement("td",C({className:"width-33 text-center"},{rowSpan:3}),'Power Supply "+"'),a.a.createElement("td",{className:"width-33"},"Current"),a.a.createElement("td",{className:"highlight text-center width-33"},l.readBackValues.currentValue)),a.a.createElement("tr",{style:{height:44}},a.a.createElement("td",{className:"width-33"},"Voltage"),a.a.createElement("td",{className:"highlight text-center width-33"},l.readBackValues.voltageValue)),a.a.createElement("tr",{style:{height:44}},a.a.createElement("td",{className:"width-33"},"Power"),a.a.createElement("td",{className:"highlight text-center width-33"},l.readBackValues.powerValue))),u&&a.a.createElement(a.a.Fragment,null,a.a.createElement("tr",{style:{height:44}},a.a.createElement("td",C({className:"width-33 text-center"},{rowSpan:3}),'Power Supply "-"'),a.a.createElement("td",{className:"width-33"},"Current"),a.a.createElement("td",{className:"highlight text-center width-33"},c.readBackValues.currentValue)),a.a.createElement("tr",{style:{height:44}},a.a.createElement("td",{className:"width-33"},"Voltage"),a.a.createElement("td",{className:"highlight text-center width-33"},c.readBackValues.voltageValue)),a.a.createElement("tr",{style:{height:44}},a.a.createElement("td",{className:"width-33"},"Power"),a.a.createElement("td",{className:"highlight text-center width-33"},c.readBackValues.powerValue))))),a.a.createElement("table",{className:{marginBotton:24}},a.a.createElement("tr",null,a.a.createElement("th",{className:"width-50"},'Power Supply "+" Settings'),a.a.createElement("th",{className:"width-50"},'Power Supply "+" Values')),a.a.createElement("tbody",null,Object.entries(l.settings).map(function(e){var t=D(e,2),n=t[0],r=t[1];return a.a.createElement("tr",{key:n},a.a.createElement("td",null,Object(p.startCase)(n)),a.a.createElement("td",null,r))}))),a.a.createElement("table",null,a.a.createElement("tr",null,a.a.createElement("th",{className:"width-50"},'Power Supply "-" Settings'),a.a.createElement("th",{className:"width-50"},'Power Supply "-" Values')),a.a.createElement("tbody",null,Object.entries(c.settings).map(function(e){var t=D(e,2),n=t[0],r=t[1];return a.a.createElement("tr",{key:n},a.a.createElement("td",null,Object(p.startCase)(n)),a.a.createElement("td",null,r))})))),ctx:w,x:35,y:5,width:400,height:g-5-5});case 28:return e.next=30,W({dateStr:n,timeStr:r,ctx:w,x:335,y:g-5-100});case 30:return e.abrupt("return",{canvas:b,canvasHeight:g,name:"vps"});case 31:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),G=function(){var e=B(regeneratorRuntime.mark(function e(t,n,r){var i,o,l,c,s,u,m,d,h,f,g,v,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.graph,o=t.settings,l=o.responseList,c=o.referenceList,s=q(o,["responseList","referenceList"]),u=H(c,["sourceFileName","channel"]),m=i.height,h=m+(d=800),f=(i.width>893?i.width:893)+u,g=U({width:f,height:h}),v=g.canvas,b=g.ctx,e.next=10,_({blob:i.blob,ctx:b,x:10,y:5,width:i.width,height:m});case 10:return e.next=12,W({dateStr:n,timeStr:r,ctx:b,x:i.width-10-100,y:m-100});case 12:return e.next=14,F({node:a.a.createElement(a.a.Fragment,null,a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:2,className:"header"},"Stimulus Channel"))),a.a.createElement("tbody",null,Object.entries(s).map(function(e){var t=D(e,2),n=t[0],r=t[1];return a.a.createElement("tr",{key:n},a.a.createElement("td",null,Object(p.startCase)(n)),a.a.createElement("td",null,r))}))),a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:3,className:"header"},"Response Channels")),a.a.createElement("tr",null,a.a.createElement("th",null,"Response Name"),a.a.createElement("th",null,"State"),a.a.createElement("th",null,"Channel Label"))),a.a.createElement("tbody",null,l.map(function(e,t){var n=e.responseName,r=e.state,i=e.channelLabel;return a.a.createElement("tr",{key:t},a.a.createElement("td",null,n),a.a.createElement("td",null,r),a.a.createElement("td",null,i))}))),a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:5,className:"header"},"Reference Channels")),a.a.createElement("tr",null,a.a.createElement("th",null,"Reference Name"),a.a.createElement("th",null,"State"),a.a.createElement("th",null,"Mode"),a.a.createElement("th",null,"Source File Name"),a.a.createElement("th",null,"Channel"))),a.a.createElement("tbody",null,c.map(function(e,t){var n=e.referenceName,r=e.state,i=e.mode,o=e.sourceFileName,l=e.channel;return a.a.createElement("tr",{key:t},a.a.createElement("td",null,n),a.a.createElement("td",null,r),a.a.createElement("td",null,i),a.a.createElement("td",null,o),a.a.createElement("td",null,l))})))),ctx:b,y:5+m,width:f,height:d});case 14:return e.abrupt("return",{canvas:v,canvasHeight:h,name:"bode"});case 15:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),J=function(){var e=B(regeneratorRuntime.mark(function e(t,n,r){var i,o,l,c,s,u,m,d,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.graph,o=t.settings,l=i.height,s=l+(c=400),u=i.width>893?i.width:893,m=U({width:u,height:s}),d=m.canvas,h=m.ctx,e.next=8,_({blob:i.blob,ctx:h,x:10,y:5,width:i.width,height:l});case 8:return e.next=10,W({dateStr:n,timeStr:r,ctx:h,x:i.width-10-100,y:l-100});case 10:return e.next=12,F({node:a.a.createElement(a.a.Fragment,null,a.a.createElement("table",null,a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:2,className:"header"},"Settings"))),a.a.createElement("tbody",null,Object.entries(o).map(function(e){var t=D(e,2),n=t[0],r=t[1];return a.a.createElement("tr",{key:n},a.a.createElement("td",null,Object(p.startCase)(n)),a.a.createElement("td",null,r))})))),ctx:h,y:5+l,height:c});case 12:return e.abrupt("return",{canvas:d,canvasHeight:s,name:"iv"});case 13:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),K=function(){var e=B(regeneratorRuntime.mark(function e(t,n,r){var i,o,l,c,s,u,m,d,h,f,g,v,b,w,E,y,S,x,O,N;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.timeGraph,o=t.fftGraph,l=t.settings,c=t.channelMeasurementsData,s=l.additionalChannels,u=l.advancedTriggerSettings,m=l.channels,d=q(l,["additionalChannels","advancedTriggerSettings","channels"]),h=H(s.referenceChannels.simulateMode,["sourceCircuit","sourceProbe"]),f=H(s.referenceChannels.loadingMode,["sourceFileName","sourceFileChannel"]),g=Math.max(h,f),v=2e3,b=!!o,w=i.height,E=b?o.height:0,y=v+w+E,S=(i.width>893?i.width:893)+g,x=U({width:S,height:y}),O=x.canvas,N=x.ctx,e.next=14,_({blob:i.blob,ctx:N,x:10,y:5,width:i.width,height:w});case 14:return e.next=16,W({dateStr:n,timeStr:r,ctx:N,x:i.width-10-100,y:w-100});case 16:if(!b){e.next=19;break}return e.next=19,_({blob:o.blob,ctx:N,x:10,y:5+w,width:o.width,height:E});case 19:return e.next=21,F({node:a.a.createElement(a.a.Fragment,null,a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:2,className:"header"},"General Settings"))),a.a.createElement("tbody",null,Object.entries(d).map(function(e){var t=D(e,2),n=t[0],r=t[1];return a.a.createElement("tr",{key:n},a.a.createElement("td",null,Object(p.startCase)(n)),a.a.createElement("td",null,r))}))),a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:2,className:"header"},"Advanced Trigger Settings"))),a.a.createElement("tbody",null,Object.entries(u).map(function(e){var t=D(e,2),n=t[0],r=t[1];return a.a.createElement("tr",{key:n},a.a.createElement("td",null,Object(p.startCase)(n)),a.a.createElement("td",null,r))}))),a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:7,className:"header"},"Channels")),a.a.createElement("tr",null,a.a.createElement("th",null,"Name"),a.a.createElement("th",null,"State"),a.a.createElement("th",null,"Coupling"),a.a.createElement("th",null,"Probe Attenuation"),a.a.createElement("th",null,"Vertical Offset"),a.a.createElement("th",null,"Vertical Position"),a.a.createElement("th",null,"Volt Per Division"))),a.a.createElement("tbody",null,m.map(function(e){var t=e.name,n=e.coupling,r=e.probeAttenuation,i=e.state,o=e.verticalOffset,l=e.verticalPosition,c=e.voltPerDivision;return a.a.createElement("tr",{key:t},a.a.createElement("td",null,t),a.a.createElement("td",null,i),a.a.createElement("td",null,n),a.a.createElement("td",null,r),a.a.createElement("td",null,o),a.a.createElement("td",null,l),a.a.createElement("td",null,c))}))),a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:7,className:"header"},"Reference Channels")),a.a.createElement("tr",null,a.a.createElement("th",null,"Name"),a.a.createElement("th",null,"State"),a.a.createElement("th",null,"Reference Mode"),a.a.createElement("th",null,"Source File Name"),a.a.createElement("th",null,"Source File Channel"),a.a.createElement("th",null,"Vertical Position"),a.a.createElement("th",null,"Volt Per Division"))),a.a.createElement("tbody",null,s.referenceChannels.loadingMode.map(function(e){var t=e.name,n=e.state,r=e.referenceMode,i=e.sourceFileName,o=e.sourceFileChannel,l=e.verticalPosition,c=e.voltPerDivision;return a.a.createElement("tr",{key:t},a.a.createElement("td",null,t),a.a.createElement("td",null,n),a.a.createElement("td",null,r),a.a.createElement("td",null,i),a.a.createElement("td",null,o),a.a.createElement("td",null,l),a.a.createElement("td",null,c))}))),a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:8,className:"header"},"Reference Channels")),a.a.createElement("tr",null,a.a.createElement("th",null,"Name"),a.a.createElement("th",null,"State"),a.a.createElement("th",null,"Reference Mode"),a.a.createElement("th",null,"Source Circuit"),a.a.createElement("th",null,"Source Probe"),a.a.createElement("th",null,"Trigger Source Checked"),a.a.createElement("th",null,"Vertical Position"),a.a.createElement("th",null,"Volt Per Division"))),a.a.createElement("tbody",null,s.referenceChannels.simulateMode.map(function(e){var t=e.name,n=e.state,r=e.referenceMode,i=e.sourceCircuit,o=e.sourceProbe,l=e.isTriggerSourceSet,c=e.verticalPosition,s=e.voltPerDivision;return a.a.createElement("tr",{key:t},a.a.createElement("td",null,t),a.a.createElement("td",null,n),a.a.createElement("td",null,r),a.a.createElement("td",null,i),a.a.createElement("td",null,o),a.a.createElement("td",null,l),a.a.createElement("td",null,c),a.a.createElement("td",null,s))}))),a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:2,className:"header"},"Additional Channels - FFT"))),a.a.createElement("tbody",null,Object.entries(s.fft).map(function(e){var t=D(e,2),n=t[0],r=t[1];return a.a.createElement("tr",{key:n},a.a.createElement("td",null,Object(p.startCase)(n)),a.a.createElement("td",null,r))}))),a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:2,className:"header"},"Additional Channels - Math"))),a.a.createElement("tbody",null,Object.entries(s.math).map(function(e){var t=D(e,2),n=t[0],r=t[1];return a.a.createElement("tr",{key:n},a.a.createElement("td",null,Object(p.startCase)(n)),a.a.createElement("td",null,r))}))),a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:5,className:"header"},"Channel Measurements Data")),a.a.createElement("tr",null,a.a.createElement("th",null,"Channel Name"),a.a.createElement("th",null,"VPP"),a.a.createElement("th",null,"RMS"),a.a.createElement("th",null,"Frequency"),a.a.createElement("th",null,"Period"))),a.a.createElement("tbody",null,c.map(function(e){e.channelIndex;var t=e.channelName,n=e.frequency,r=e.period,i=e.rms,o=e.vpp;return a.a.createElement("tr",{key:t},a.a.createElement("td",null,t),a.a.createElement("td",null,o),a.a.createElement("td",null,i),a.a.createElement("td",null,n),a.a.createElement("td",null,r))})))),ctx:N,y:5+w+E,width:S,height:v});case 21:return e.abrupt("return",{canvas:O,canvasHeight:y,name:"scope"});case 22:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),$=function(){var e=B(regeneratorRuntime.mark(function e(t,n,r){var i,o,l,c,s,u,m,d,h,f,g,v,b,w,E,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.graph,o=t.settings,l=35*o.channels.length+1e3,c=i.height,s=l+c,u=i.width>893?i.width:893,m=U({width:u,height:s}),d=m.canvas,h=m.ctx,e.next=8,_({blob:i.blob,ctx:h,x:10,y:5,width:i.width,height:c});case 8:return e.next=10,W({dateStr:n,timeStr:r,ctx:h,x:i.width-10-100,y:c-100});case 10:return f=o.channels,g=o.sampleRate,v=o.loggingFormat,b=o.startTrigger,w=o.stopTrigger,E=o.loggingStyle,y=o.fileName,e.next=13,F({node:a.a.createElement(a.a.Fragment,null,a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:6,className:"header"},"Channels")),a.a.createElement("tr",null,a.a.createElement("th",null,"Bank"),a.a.createElement("th",null,"Label"),a.a.createElement("th",null,"Status"),a.a.createElement("th",null,"Channel Name"),a.a.createElement("th",null,"Vertical Position"),a.a.createElement("th",null,"Vertical Range"))),a.a.createElement("tbody",null,f.map(function(e){var t=e.index,n=e.label,r=e.bank,i=e.channelName,o=e.status,l=e.verticalPosition,c=e.verticalRange;return a.a.createElement("tr",{key:t},a.a.createElement("td",null,r),a.a.createElement("td",null,n),a.a.createElement("td",null,o),a.a.createElement("td",null,i),a.a.createElement("td",null,l),a.a.createElement("td",null,c))}))),a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:2,className:"header"},"Sample Rate"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"Value"),a.a.createElement("td",null,g)))),a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:7,className:"header"},"Start Trigger"))),a.a.createElement("tbody",null,Object.entries(b).map(function(e){var t=D(e,2),n=t[0],r=t[1];return a.a.createElement("tr",{key:n},a.a.createElement("td",null,Object(p.startCase)(n)),a.a.createElement("td",null,r))}))),a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:7,className:"header"},"Stop Trigger"))),a.a.createElement("tbody",null,Object.entries(w).map(function(e){var t=D(e,2),n=t[0],r=t[1];return a.a.createElement("tr",{key:n},a.a.createElement("td",null,Object(p.startCase)(n)),a.a.createElement("td",null,r))}))),a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:2,className:"header"},"File Format"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"Value"),a.a.createElement("td",null,v)))),a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:2,className:"header"},"File Location"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"Value"),a.a.createElement("td",null,E)))),"USB storage plugged in ELVIS III"===E&&a.a.createElement(a.a.Fragment,null,a.a.createElement("table",{style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:2,className:"header"},"File Name"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"Value"),a.a.createElement("td",null,y)))))),ctx:h,y:5+c,height:l});case 13:return e.abrupt("return",{canvas:d,canvasHeight:s,name:"datalogger"});case 14:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),Z=function(){var e=B(regeneratorRuntime.mark(function e(t,n,r){var i,o,l,c,s,u,m,d,h,f,g,v,b,w,E,y,S,x,O,N;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(i=t.a0Settings,o=t.a1Settings,l=t.b0Settings,c=t.b1Settings,s=[i,o,l,c],u=["A/AO0","A/AO1","B/AO0","B/AO1"],m=30,d=0,h=30,f=0;f<s.length;++f)d+=(Object.keys(s[f]).length+1)*m+h;v=U({width:470,height:g=d+5+5}),b=v.canvas,w=v.ctx,E=5,y=0;case 11:if(!(y<s.length)){e.next=20;break}return S=s[y],x=S.mode,O=q(S,["mode"]),N=(Object.keys(s[y]).length+1)*m+h,e.next=16,F({node:a.a.createElement(a.a.Fragment,null,a.a.createElement("table",{className:"full-width",style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:2,className:"header"}," ",u[y]))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",{className:"width-50"},"Mode"),a.a.createElement("td",{className:"width-50"},x)),Object.entries(O).map(function(e){var t=D(e,2),n=t[0],r=t[1];return a.a.createElement("tr",{key:n},a.a.createElement("td",{className:"width-50"},Object(p.startCase)(n)),a.a.createElement("td",{className:"width-50"},r))})))),ctx:w,x:10,y:E,width:370,height:N});case 16:E+=N;case 17:++y,e.next=11;break;case 20:return e.next=22,W({dateStr:n,timeStr:r,ctx:w,x:310,y:g-5-100});case 22:return e.abrupt("return",{canvas:b,canvasHeight:g,name:"datagen"});case 23:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),Q=function(){var e=B(regeneratorRuntime.mark(function e(t,n,r){var i,o,l,c,s,u,m,d,h,f,g,v,b,w,E,y,S,x,O,N;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(i=t.channel0Settings,o=t.channel1Settings,l=t.channel2Settings,c=t.channel3Settings,s=[i,o,l,c],u=["A/DIO7:0","A/DIO15:8","B/DIO7:0","B/DIO15:8"],m=30,d=0,h=30,f=0;f<s.length;++f)d+=(Object.keys(s[f]).length+1)*m+h;v=U({width:470,height:g=d+5+5}),b=v.canvas,w=v.ctx,E=5,y=0;case 11:if(!(y<s.length)){e.next=20;break}return S=s[y],x=S.mode,O=q(S,["mode"]),N=(Object.keys(s[y]).length+1)*m+h,e.next=16,F({node:a.a.createElement(a.a.Fragment,null,a.a.createElement("table",{className:"full-width",style:{marginBottom:24}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{colspan:2,className:"header"},u[y]))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",{className:"width-50"},"Mode"),a.a.createElement("td",{className:"width-50"},x)),Object.entries(O).map(function(e){var t=D(e,2),n=t[0],r=t[1];return a.a.createElement("tr",{key:n},a.a.createElement("td",{className:"width-50"},Object(p.startCase)(n)),a.a.createElement("td",{className:"width-50"},r))})))),ctx:w,x:10,y:E,width:370,height:N});case 16:E+=N;case 17:++y,e.next=11;break;case 20:return e.next=22,W({dateStr:n,timeStr:r,ctx:w,x:310,y:g-5-100});case 22:return e.abrupt("return",{canvas:b,canvasHeight:g,name:"digitalio"});case 23:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),ee=function(e,t,n,r){switch(t){case"fgen":return V(e,n,r);case"dmm":return Y(e,n,r);case"vps":return X(e,n,r);case"bode":return G(e,n,r);case"iv":return J(e,n,r);case"scope":return K(e,n,r);case"datalogger":return $(e,n,r);case"datagenerator":return Z(e,n,r);case"digitalio":return Q(e,n,r)}},te=function(e,t){var n=e.selectedInstruments,r=t.instrumentName;return n.has(r)?n.delete(r):n.add(r),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){k(e,t,n[t])})}return e}({},e,{selectedInstruments:new Set(n)})},ne=function(e,t){switch(t.type){case"CLICK_INSTRUMENT":return te(e,t);default:return e}},re=function(e){var t,n,i,o=e.instruments,l=e.toolbarRef,c=(t=D(Object(r.useReducer)(ne,{selectedInstruments:new Set}),2),n=t[0],i=t[1],{state:n,clickInstrument:function(e){return i({type:"CLICK_INSTRUMENT",instrumentName:e})}}),s=c.state.selectedInstruments,u=c.clickInstrument,m=D(Object(r.useState)(""),2),d=m[0],h=m[1],p=function(){var e=B(regeneratorRuntime.mark(function e(){var t,n,r,a,i,o,c,u,m,d,p,f,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!M){e.next=3;break}return h("iOS does not allow taking screenshots."),e.abrupt("return");case 3:t=l.current.closest(".bentobox-wrapper").querySelector(".instruments-wrapper"),n=Array.from(s),r=j(),a=r.year,i=r.month,o=r.day,c=r.hour,u=r.minute,m=r.second,d="".concat(i,"/").concat(o,"/").concat(a),p="".concat(c,":").concat(u,":").concat(m),f=regeneratorRuntime.mark(function e(){var r,l,s,h,f,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n[g],!(l=t.querySelector(S[r]))||!l.getMeasurementsData){e.next=17;break}return e.next=5,Promise.all([l.getMeasurementsData()]).then(function(e){var t=D(e,1)[0];return ee(t,r,d,p)});case 5:if(s=e.sent,h=s.name,f=s.canvas,v="".concat(h,"_").concat(a).concat(i).concat(o,"_").concat(c).concat(u).concat(m,".png"),!P){e.next=16;break}return e.next=12,R(f,v);case 12:return e.next=14,I(1e3);case 14:e.next=17;break;case 16:R(f,v);case 17:case"end":return e.stop()}},e,this)}),g=0;case 10:if(!(g<n.length)){e.next=15;break}return e.delegateYield(f(),"t0",12);case 12:g++,e.next=10;break;case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();return a.a.createElement(v.d,{container:!0,spacing:16,direction:"column",className:"snapshot-instruments"},a.a.createElement(v.d,{item:!0,xs:12,className:"title"},"Choose instrument(s) to capture"),L(o.large).concat(L(o.small)).map(function(e){var t=e.name,n=s.has(t);return a.a.createElement(v.d,{key:t,item:!0,xs:12,className:"snapshot-instrument cursor-pointer",onClick:function(){return u(t)}},a.a.createElement("div",{className:"item"},a.a.createElement(w,{className:"item-checkbox",selected:n}),a.a.createElement("div",{className:"item-name"},x[t])))}),a.a.createElement(v.d,{item:!0,xs:12},a.a.createElement("button",{disabled:s.size<=0,onClick:p},"Take ".concat(s.size>1?"Screenshots":"Screenshot"))),a.a.createElement(v.d,{item:!0,xs:12},a.a.createElement("span",{className:"warning-item"},d)))};re.propTypes={instruments:u.a.object.isRequired,toolbarRef:u.a.object.isRequired};var ae=re;function ie(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function oe(e,t,n,r,a,i,o){try{var l=e[i](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,a)}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var se=Object.freeze({bode:!0,iv:!0,scope:!0,datalogger:!0}),ue=Object.freeze({bode:!1,iv:!1,scope:!0,datalogger:!0}),me=new Set(["starting","running","stopping"]),de=function(e,t){var n=e.selectedInstrumentsExportFormats,r=t.instrumentExportFormat;return n.has(r)?n.delete(r):n.add(r),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ce(e,t,n[t])})}return e}({},e,{selectedInstrumentsExportFormats:new Set(n)})},he=function(e,t){switch(t.type){case"CLICK_INSTRUMENT_EXPORT_FORMAT":return de(e,t);default:return e}},pe=function(e){var t,n,i,o=e.instruments,l=e.toolbarRef,c=e.deviceConnected,s=e.isSimulateMode,u=(t=le(Object(r.useReducer)(he,{selectedInstrumentsExportFormats:new Set}),2),n=t[0],i=t[1],{state:n,clickInstrumentExportFormat:function(e){return i({type:"CLICK_INSTRUMENT_EXPORT_FORMAT",instrumentExportFormat:e})}}),m=u.state.selectedInstrumentsExportFormats,h=u.clickInstrumentExportFormat,p=l.current?l.current.closest(".bentobox-wrapper").querySelector(".instruments-wrapper"):null,f=le(Object(r.useState)(""),2),g=f[0],b=f[1],E=function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,n,r,a,i,o,l,c,s,u,d,h,f,g,v,w,E,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!M){e.next=3;break}return b("iOS does not allow exporting data."),e.abrupt("return");case 3:return t=j(),n=t.year,r=t.month,a=t.day,i=t.hour,o=t.minute,l=t.second,e.next=6,Promise.all(Array.from(m).map(function(e){var t=le(e.split("-"),2),n=t[0],r=t[1],a=p.querySelector(S[n]);return a&&a.exportDataAsync?Promise.all([n,r,a.exportDataAsync(O[r],n)]):Promise.resolve(null)})).then(function(e){return e.filter(function(e){return null!=e})});case 6:c=e.sent,s=!0,u=!1,d=void 0,e.prev=10,h=c[Symbol.iterator]();case 12:if(s=(f=h.next()).done){e.next=25;break}if(g=le(f.value,3),v=g[0],w=g[1],E=g[2],y="".concat(v,"_").concat(n).concat(r).concat(a,"_").concat(i).concat(o).concat(l,".").concat(w),!P){e.next=21;break}return N(E,y),e.next=19,I(1e3);case 19:e.next=22;break;case 21:N(E,y);case 22:s=!0,e.next=12;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(10),u=!0,d=e.t0;case 31:e.prev=31,e.prev=32,s||null==h.return||h.return();case 34:if(e.prev=34,!u){e.next=37;break}throw d;case 37:return e.finish(34);case 38:return e.finish(31);case 39:case"end":return e.stop()}},e,this,[[10,27,31,39],[32,,34,38]])}),function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){oe(i,r,a,o,l,"next",e)}function l(e){oe(i,r,a,o,l,"throw",e)}o(void 0)})});return function(){return t.apply(this,arguments)}}(),y=m.size<=0||!function(){var e=new Set,t=!0,n=!1,r=void 0;try{for(var a,i=m[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=le(a.value.split("-"),1)[0];e.add(o)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return Array.from(e).reduce(function(e,t){return p&&p.querySelector(S[t])?e&&!me.has(p.querySelector(S[t]).state):e},!0)}(),R=function(e,t){if(!p)return!1;var n=p.querySelector(S[e]),r=!!t&&!c;return n&&n.disableExportFileToWeb&&n.disableExportFileToWeb()||r};return a.a.createElement(v.d,{container:!0,spacing:16,direction:"column",className:"data-export-instruments"},a.a.createElement(v.d,{item:!0,xs:12,className:"title"},"Choose data to export"),ie(o.large).concat(ie(o.small)).map(function(e){var t=e.name,n=se[t],r=ue[t],i=R(t,!1),o=!!s||R(t,!0),l="".concat(t,"-csv"),c="".concat(t,"-tdms");return n||r?a.a.createElement(v.d,{key:t,item:!0,xs:12,className:"export-options-wrapper"},a.a.createElement("div",{className:"instrument-name"},x[t]),a.a.createElement("div",{className:"export-options"},n&&a.a.createElement("span",{onClick:i?void 0:function(){return h(l)},className:d()({"export-option":!0,disabled:i})},a.a.createElement(w,{selected:m.has(l)})," CSV"),r&&a.a.createElement("span",{onClick:o?void 0:function(){return h(c)},className:d()({"export-option":!0,disabled:o})},a.a.createElement(w,{selected:m.has(c)})," TDMS"))):null}).filter(function(e){return null!==e}),a.a.createElement(v.d,{item:!0,xs:12},a.a.createElement("button",{disabled:y,onClick:E},"Export Data")),a.a.createElement(v.d,{item:!0,xs:12},a.a.createElement("span",{className:"warning-item"},g)))};pe.propTypes={instruments:u.a.object.isRequired,toolbarRef:u.a.object.isRequired,deviceConnected:u.a.bool.isRequired,isSimulateMode:u.a.bool.isRequired};var fe=pe;function ge(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ve=Object.freeze({bode:{overview:"http://www.ni.com/r/w2csrb",connection:"http://www.ni.com/r/vwva8s",configuration:"http://www.ni.com/r/f52sat"},scope:{overview:"http://www.ni.com/r/32cpd1",connection:"http://www.ni.com/r/ink0vh",configuration:"http://www.ni.com/r/38ditw"},iv:{overview:"http://www.ni.com/r/rl0tbq",connection:"http://www.ni.com/r/8ew8la",configuration:"http://www.ni.com/r/wait6d"},dmm:{overview:"http://www.ni.com/r/mxsxqx",connection:"http://www.ni.com/r/nh2l7u",configuration:"http://www.ni.com/r/2n28i5"},fgen:{overview:"http://www.ni.com/r/7x4iz7",connection:"http://www.ni.com/r/1v0bkb",configuration:"http://www.ni.com/r/s9alvk"},vps:{overview:"http://www.ni.com/r/lrhbjs",connection:"http://www.ni.com/r/jcc8wd",configuration:"http://www.ni.com/r/5oe411"},datalogger:{overview:"http://www.ni.com/r/2qho9j",connection:"http://www.ni.com/r/bgwqbx",configuration:"http://www.ni.com/r/5f487u"},datagenerator:{overview:"http://www.ni.com/r/v8nnja",connection:"http://www.ni.com/r/l65dip",configuration:"http://www.ni.com/r/fs278v"},digitalio:{overview:"http://www.ni.com/r/qacudf",connection:"http://www.ni.com/r/l6ecnb",configuration:"http://www.ni.com/r/8rbyv3"}}),be=function(e){var t=e.instruments,n=e.isSimulateMode;return a.a.createElement("div",{className:"help-menu"},a.a.createElement("div",{className:"title"},"Help topics:"),n&&a.a.createElement("div",{key:"simulate",className:"menu-items"},a.a.createElement("div",{className:"title"},"Simulating Instruments"),a.a.createElement("a",{className:"menu-item",target:"_blank",rel:"noopener noreferrer",href:"https://www.ni.com/r/46wojy"},"Overview")),ge(t.large).concat(ge(t.small)).map(function(e){var t=e.name;return a.a.createElement("div",{key:t,className:"menu-items"},a.a.createElement("div",{className:"title"},x[t]),a.a.createElement("a",{className:"menu-item",target:"_blank",rel:"noopener noreferrer",href:ve[t].overview},"Overview"),a.a.createElement("a",{className:"menu-item",target:"_blank",rel:"noopener noreferrer",href:ve[t].connection},"Connecting signals"),a.a.createElement("a",{className:"menu-item",target:"_blank",rel:"noopener noreferrer",href:ve[t].configuration},"Configuration options"))}))};be.propTypes={instruments:u.a.object.isRequired,isSimulateMode:u.a.bool.isRequired};var we=be;function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ye=function(e){var t=e.imageUrl,n=e.activeImageUrl,i=e.disabled,o=e.childComponent,l=e.childProps,c=Ee(Object(r.useState)(null),2),s=c[0],u=c[1],m=!!s,h=Object(r.useRef)(null);return Object(r.useEffect)(function(){if(m){var e=s.getBoundingClientRect(),t=e.left,n=e.bottom,r=h.current.querySelector(".bentobox-toolbar-popover"),a=r.getBoundingClientRect().width,i=s.closest(".bentobox-wrapper").getBoundingClientRect(),o=i.height,l=i.width;r.style.left="".concat(l-t-a,"px"),r.style.maxHeight="".concat(o-n,"px")}},[m]),a.a.createElement("div",{className:"action-button",ref:h},a.a.createElement("img",{className:d()({action:!0,disabled:i,active:m}),src:m?n:t,onClick:i?void 0:function(e){return u(e.currentTarget)}}),m&&a.a.createElement(a.a.Fragment,null,a.a.createElement(v.a,{className:"bentobox-popover-backdrop",open:m,onClick:function(){return u(null)}}),a.a.createElement(v.f,{className:"bentobox-toolbar-popover",square:!0},a.a.createElement(v.b,{square:!0,tabIndex:"-1"},a.a.createElement(v.c,null,a.a.createElement(o,l))))))};ye.propTypes={imageUrl:u.a.string.isRequired,activeImageUrl:u.a.string.isRequired,disabled:u.a.bool.isRequired,childComponent:u.a.oneOfType([u.a.func,u.a.string]).isRequired,childProps:u.a.object.isRequired},ye.defaultProps={disabled:!1,childProps:{}};var Se=ye,xe="ellipsis-usage";function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ne=function(e){var t=Oe(Object(r.useState)(!1),2),n=t[0],i=t[1];return a.a.createElement(a.a.Fragment,null,n&&a.a.createElement(v.a,{className:"bentobox-popover-backdrop",open:n,onClick:function(){i(!1)}}),a.a.createElement("div",{className:d()("dropdown",{isOpen:n})},a.a.createElement("img",{className:"more-button",src:"".concat(window.NationalInstruments.bentoBox.svgSpriteUrl).concat(xe),onClick:function(){return i(!0)}}),a.a.createElement("div",{className:"dropdown-content"},e.children)))},Re="snapshot-white-usage",je="snapshot-blue-usage",Ie="data-export-white-usage",Te="data-export-blue-usage",Me="help-white-usage",Pe="help-blue-usage";function Ae(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ce=a.a.forwardRef(function(e,t){var n=e.isPopoutMode,i=e.isSimulateMode,o=e.instruments,l=e.setInstrumentsTabLoaded,c=e.setDeviceTabLoaded,s=e.isLargeScreen,u=ke(Object(r.useState)({}),2),m=u[0],d=m.deviceState,f=m.connectedDevice,g=u[1],v=ke(Object(r.useState)("Not connected"),2),b=v[0],w=v[1],E=ke(Object(r.useReducer)(function(e,t){return"SET_STATUS"===t.type?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Le(e,t,n[t])})}return e}({},e,Le({},t.name,t.status)):e},{}),2),y=E[0],x=E[1],O=function(e){var t=e.detail,n=t.name,r=t.status;["starting","attached"].includes(r)&&x({type:"SET_STATUS",name:n,status:r})},N=!Object(h.isEmpty)(o.large)||!Object(h.isEmpty)(o.small),R=!!(f&&f.deviceName||n&&"Not connected"!==b),j=Object(r.useRef)(),I=Object(r.useRef)(),T=function(e){var t=e.detail,n=t.state,r=t.connectedDevice;return g({deviceState:n,connectedDevice:r})},M=function(){return l(!0)},P=function(){return c(!0)},A=function(e){var t=e.detail.deviceName;w(t)};Object(r.useEffect)(function(){if(!n)return j.current.isAttached?P():j.current.addEventListener("isAttached",P),j.current.isAttached&&"CONNECTED"===j.current.$.deviceTab.connectionState?T({bubbles:!0,cancelable:!0,composed:!0,detail:{state:"CONNECTED",connectedDevice:j.current.$.deviceTab.manager.activeConnection.deviceInfo}}):j.current.addEventListener("connectionStateChanged",T),I.current.isAttached?M():I.current.addEventListener("isAttached",M),I.current.addEventListener("instrumentStatusChanged",O),function(){j.current.removeEventListener("isAttached",P),j.current.removeEventListener("connectionStateChanged",T),I.current.removeEventListener("isAttached",M),I.current.removeEventListener("instrumentStatusChanged",O)};M()},[]),Object(r.useEffect)(function(){if(n&&t&&t.current&&N){var e=Ae(o.large).concat(Ae(o.small))[0],r=t.current.closest(".bentobox-wrapper").querySelector(".instruments-wrapper").querySelector(S[e.name]);if(r){var a=r.TranslatedDeviceName;return a&&w(a),r.addEventListener("deviceNameChanged",A),function(){r.removeEventListener("deviceNameChanged",A)}}}},[N]);var L,k,C=!N||Object.values(y).includes("starting");return L=n&&Object(h.isEmpty)(o.large)&&!Object(h.isEmpty)(o.small)?a.a.createElement(Se,{imageUrl:"".concat(window.NationalInstruments.bentoBox.svgSpriteUrl).concat(Re),activeImageUrl:"".concat(window.NationalInstruments.bentoBox.svgSpriteUrl).concat(je),disabled:C,childComponent:ae,childProps:{instruments:o,toolbarRef:t,deviceConnected:R}}):a.a.createElement(Ne,null,a.a.createElement(Se,{imageUrl:"".concat(window.NationalInstruments.bentoBox.svgSpriteUrl).concat(Re),activeImageUrl:"".concat(window.NationalInstruments.bentoBox.svgSpriteUrl).concat(je),disabled:C,childComponent:ae,childProps:{instruments:o,toolbarRef:t,deviceConnected:R}}),a.a.createElement(Se,{imageUrl:"".concat(window.NationalInstruments.bentoBox.svgSpriteUrl).concat(Ie),activeImageUrl:"".concat(window.NationalInstruments.bentoBox.svgSpriteUrl).concat(Te),disabled:C,childComponent:fe,childProps:{instruments:o,toolbarRef:t,deviceConnected:R,isSimulateMode:i}})),k=i?a.a.createElement("simulate-instruments-button",{ref:I,name:"instruments",deviceGroup:"default",id:"instrument1",className:"buttons",bentoboxmode:"true"}):a.a.createElement("instruments-button",{ref:I,name:"instruments",deviceGroup:"default",id:"instrument1",className:"buttons",bentoboxmode:"true"}),a.a.createElement("div",{ref:t,className:"toolbar"},a.a.createElement("span",{className:"title"},n?b:(Object(h.isEmpty)(f)?null:f.deviceName)||(d&&"CONNECTING"===d?Object(p.startCase)(d.toLowerCase()):s?"No device connected":"No device")),a.a.createElement("div",{className:"buttons"},a.a.createElement("div",{className:"group-left"},!n&&a.a.createElement("device-button",{ref:j,style:{display:i?"none":"block"},name:"device",deviceGroup:"default",id:"device1",className:"buttons",bentoboxmode:!0})),a.a.createElement("div",{className:"group-right"},!n&&k,L,a.a.createElement(Se,{imageUrl:"".concat(window.NationalInstruments.bentoBox.svgSpriteUrl).concat(Me),activeImageUrl:"".concat(window.NationalInstruments.bentoBox.svgSpriteUrl).concat(Pe),disabled:!N,childComponent:we,childProps:{instruments:o,toolbarRef:t,deviceConnected:R,isSimulateMode:i}}))))});Ce.propTypes={isPopoutMode:u.a.bool.isRequired,instruments:u.a.object.isRequired,setInstrumentsTabLoaded:u.a.func.isRequired,setDeviceTabLoaded:u.a.func.isRequired,isLargeScreen:u.a.bool.isRequired},Ce.displayName="ToolBar";var De=Ce,qe=function(e){var t=e.isPopoutMode,n=e.isSimulateMode,i=e.scriptLoaded,o=e.setScriptLoaded,l=e.setInstrumentsTabLoaded,c=e.setDeviceTabLoaded,s=e.instruments,u=e.isLargeScreen,m=Object(r.useRef)();Object(r.useEffect)(function(){t?y({scriptId:"#websfp-loader",scriptUrl:"".concat(Object({}).INSTRUMENTS_ROOT_URL?"".concat(document.location.origin).concat(Object({}).INSTRUMENTS_ROOT_URL):"".concat(window.NationalInstruments.measurementsLive.rootUrl,"/instruments"),"/websfploader.js"),parentSelector:"head"}).then(function(){window.addEventListener("websfploaderLoaded",function(){return o(!0)},{once:!0})}):y({scriptId:"#script-lobbybar",scriptUrl:"".concat(window.NationalInstruments.measurementsLive.rootUrl,"/measurementslive.js"),parentSelector:"body"}).then(function(){window.NationalInstruments.measurementsLive.bentoBoxMode=!0,o(!0)})},[]);var d=new URLSearchParams(location.search);return i&&a.a.createElement(a.a.Fragment,null,!t&&a.a.createElement(a.a.Fragment,null,a.a.createElement("measurements-live",{logo:!0,bentoboxmode:!0,simulatemode:n,deviceGroup:"default",language:d.get("language")||"en-us","signaling-server-address":d.get("signaling-server-address")||"server",deviceid:d.get("id")||"","usb-connection-address":d.get("usb-connection-address")||"","on-device":window.NationalInstruments.measurementsLive.onDevice})),a.a.createElement(De,{ref:m,isPopoutMode:t,isSimulateMode:n,instruments:s,setInstrumentsTabLoaded:l,setDeviceTabLoaded:c,isLargeScreen:u}))};qe.propTypes={isPopoutMode:u.a.bool.isRequired,scriptLoaded:u.a.bool.isRequired,setScriptLoaded:u.a.func.isRequired,setInstrumentsTabLoaded:u.a.func.isRequired,setDeviceTabLoaded:u.a.func.isRequired,instruments:u.a.object.isRequired,isLargeScreen:u.a.bool.isRequired};var ze=qe,Be=n(79),He=n(214),Ue="move-usage",_e="new-window-usage",Fe="close-usage";function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ve=a.a.forwardRef(function(e,t){var n=e.isPressing,r=e.onMouseDown;return a.a.createElement("img",{ref:t,className:d()({"move-icon":!0,active:n}),onMouseDown:r,width:"24",height:"24",src:"".concat(window.NationalInstruments.bentoBox.svgSpriteUrl).concat(Ue)})});Ve.propTypes={isPressing:u.a.bool.isRequired,onMouseDown:u.a.func.isRequired},Ve.displayName="MoveIcon";var Ye=a.a.forwardRef(function(e,t){var n=e.name,i=e.isPressing,o=e.style,l=e.onMouseDown,c=e.popoutInstrument,s=e.closeInstrument,u=e.isLargeScreen,m=We(Object(r.useState)(!1),2),d=m[0],h=m[1],p=We(Object(r.useState)(!1),2),f=p[0],g=p[1],b=t.instrumentRef,w=t.instrumentOptionsRef,E=Object(r.useRef)(),y=u&&!A(),S=y&&d,x=function(e){g("popoutDisabled"===e.type)},O=function(){h(!1)};return Object(r.useEffect)(function(){return b.current&&(b.current.addEventListener("popoutDisabled",x),b.current.addEventListener("popoutEnabled",x)),function(){b.current&&(b.current.removeEventListener("popoutDisabled",x),b.current.removeEventListener("popoutEnabled",x))}},[b]),Object(r.useEffect)(function(){S&&(E.current.style.display="block",requestAnimationFrame(function(){return E.current.style.display=null}))},[d]),a.a.createElement(a.a.Fragment,null,S&&a.a.createElement("div",{ref:E,className:"instrument-options-refresher"}),a.a.createElement("div",{ref:w,className:"instrument-options",style:o},y?a.a.createElement(a.a.Fragment,null,d?a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"instrument-options-dropdown-outarea",onClick:O}),a.a.createElement(v.f,{className:"instrument-options-dropdown",onClose:O},a.a.createElement(v.e,null,a.a.createElement(Ve,{isPressing:i,onMouseDown:l}),a.a.createElement(He.b,{onClick:O})),a.a.createElement(v.e,{onClick:function(){var e=w.current.closest(".bentobox-wrapper").querySelector(".toolbar instruments-button");e&&e.shadowRoot.querySelector("#instrument-tab").dispatchEvent(new CustomEvent("sfpPopoutStart",{detail:{instrumentName:n}}));var t=b.current;t.freezeController();var r=t.serialize();c(r),O()},disabled:f},a.a.createElement("img",{className:"popout-icon",width:"24",height:"24",src:"".concat(window.NationalInstruments.bentoBox.svgSpriteUrl).concat(_e)})),a.a.createElement(v.e,{onClick:function(){s(),O()}},a.a.createElement("img",{className:"close-icon",width:"24",height:"24",src:"".concat(window.NationalInstruments.bentoBox.svgSpriteUrl).concat(Fe)})))):a.a.createElement(a.a.Fragment,null,a.a.createElement(Ve,{isPressing:i,onMouseDown:l}),a.a.createElement(He.a,{onClick:function(){return h(!0)}}))):a.a.createElement("img",{className:"close-icon",width:"24",height:"24",src:"".concat(window.NationalInstruments.bentoBox.svgSpriteUrl).concat(Fe),onClick:function(){s(),O()}})))});Ye.propTypes={name:u.a.string.isRequired,isPressing:u.a.bool.isRequired,style:u.a.object.isRequired,onMouseDown:u.a.func.isRequired,popoutInstrument:u.a.func.isRequired,closeInstrument:u.a.func.isRequired,isLargeScreen:u.a.bool.isRequired},Ye.displayName="InstrumentOptions";var Xe=Ye;function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Je(e,t,n[t])})}return e}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var $e=function(e){var t,n,i,o,l=e.className,c=e.horizontal,s=e.onResize,u=e.setOverlayActivated,m=(t={isPressing:!1},n=Ke(Object(r.useReducer)(function(e,n){switch(n.type){case"ACTIVATE":return Ge({},e,{isPressing:!0});case"DEACTIVATE":return Ge({},t);default:return e}},t),2),i=n[0],o=n[1],{state:i,handleActivate:function(){return o({type:"ACTIVATE"})},handleDeactivate:function(){return o({type:"DEACTIVATE"})}}),d=m.state,h=d.isPressing,p=d.mouseX,f=d.mouseY,g=m.handleActivate,v=m.handleDeactivate,b=function(){v(),u(!1)},w=function(e){var t=e.pageX,n=e.pageY;s(c?t:n)};return Object(r.useEffect)(function(){if(h)return window.addEventListener("mousemove",w),window.addEventListener("mouseup",b),function(){window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",b)}},[h,p,f]),a.a.createElement("div",{className:l,onMouseDown:function(){g(),u(!0)}})};$e.propTypes={className:u.a.string.isRequired,horizontal:u.a.bool.isRequired,onResize:u.a.func.isRequired,setOverlayActivated:u.a.func.isRequired},$e.defaultProps={horizontal:!1};var Ze=$e;function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){et(e,t,n[t])})}return e}function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var nt=Object.freeze({fgen:10,vps:10,dmm:10,scope:10,bode:10,iv:10,datalogger:10,datagenerator:10,digitalio:10}),rt=Be.presets.stiff,at={scale:Object(Be.spring)(1,rt),shadow:Object(Be.spring)(1,rt)},it={scale:Object(Be.spring)(1.05,rt),shadow:Object(Be.spring)(16,rt)},ot=function(e){var t,n,i,o,l=e.order,c=e.originalLeft,s=e.originalTop,u=e.instrumentLength,m=e.instrument,d=m.name,h=m.size,p=m.widthDiff,f=m.heightDiff,g=m.topDiff,v=m.settings,b=e.style,w=e.reorderInstruments,E=e.resizeInstrument,y=e.popoutInstrument,x=e.isHorizontal,O=e.isLargeScreen,N=e.isPopoutMode,R=e.isSimulateMode,j=e.preconfigured,I=e.updateNoScrollMinHeight,T=e.setReorderingSize,M=e.scrollContainerRef,P=e.hasInstrumentOptions,A=function(e){var t=e.originalLeft,n=e.originalTop,a={overlayActivated:!1,isPressing:!1,mouseX:0,mouseY:0,deltaX:0,deltaY:0},i=tt(Object(r.useReducer)(function(e,t){switch(t.type){case"ACTIVATE":return Qe({},e,{overlayActivated:!0,isPressing:!0,deltaX:t.deltaX,deltaY:t.deltaY,mouseX:t.mouseX,mouseY:t.mouseY});case"ACTIVATE_OVERLAY":return Qe({},e,{overlayActivated:t.activated});case"SET_MOUSE_POSITION":return Qe({},e,{mouseX:t.mouseX,mouseY:t.mouseY});case"DEACTIVATE":return Qe({},a);default:return e}},a),2),o=i[0],l=i[1];return{state:o,handleActivate:function(e){var r=e.pageX,a=e.pageY;return l({type:"ACTIVATE",deltaX:r-t,deltaY:a-n,mouseX:r,mouseY:a})},setMousePosition:function(e){var t=e.pageX,n=e.pageY;return l({type:"SET_MOUSE_POSITION",mouseX:t,mouseY:n})},handleDeactivate:function(){return l({type:"DEACTIVATE"})},setOverlayActivated:function(e){return l({type:"ACTIVATE_OVERLAY",activated:e})}}}({originalTop:s,originalLeft:c}),L=A.state,k=L.overlayActivated,C=L.isPressing,D=L.mouseX,q=L.mouseY,z=L.deltaX,B=L.deltaY,H=A.handleActivate,U=A.setMousePosition,_=A.handleDeactivate,F=A.setOverlayActivated,W=tt(Object(r.useState)(0),2),V=W[0],Y=W[1],X=Object(r.useRef)(),G=Object(r.useRef)(),J=O?nt[d]:0,K=!N&&(!j||P)&&!R,$=X.current&&(N||!K||G.current);X.current&&X.current.shadowRoot&&(t=X.current.shadowRoot.querySelector("#mainPanel"),n=t.shadowRoot.querySelector("#toolbar-container"),i=t.shadowRoot.querySelector("#titlebar-container"),o=t.shadowRoot.querySelector("#panel-wrapper"),K&&(n.style.paddingLeft="".concat(55+J,"px")),i.style.display="none");var Z=function(){Y(o.scrollLeft)},Q=function(e){var t=e.x,n=e.y,r=x?Math.max(Math.min(Math.floor(t/b.width),u-1),0):Math.max(Math.min(Math.floor(n/b.height),u-1),0);l!==r&&w({dragIdx:l,dropIdx:r,size:h})},ee=function(e){var t=e.pageX,n=e.pageY;O&&(H({pageX:t,pageY:n}),T(h))},te=function(){_(),Q({x:D,y:q}),T(null)},ne=function(e){var t=e.pageX,n=e.pageY;U({pageX:t,pageY:n}),Q({x:t,y:n})},re=function(e){ee(e.touches[0])},ae=function(e){e.preventDefault(),ne(e.touches[0])},ie=te,oe=function(){G.current&&G.current.closest(".bentobox-wrapper").querySelector(".toolbar #instrument1").shadowRoot.querySelector("#instrument-tab").closeInstrumentWithName(d)},le=function(e){var t=e.detail.noScrollMinHeight;return I(d,t)},ce=function(){return X.current.updateFloatingLocker(M.current.getBoundingClientRect().top)};return Object(r.useEffect)(function(){if(C&&O)return window.addEventListener("mousemove",ne),window.addEventListener("mouseup",te),window.addEventListener("touchmove",ae),window.addEventListener("touchend",ie),function(){window.removeEventListener("mousemove",ne),window.removeEventListener("mouseup",te),window.removeEventListener("touchmove",ae),window.removeEventListener("touchend",ie)}},[C,l,D,q]),Object(r.useEffect)(function(){if(o)return Z(),o.addEventListener("scroll",Z),function(){o.removeEventListener("scroll",Z)}},[o]),Object(r.useEffect)(function(){return X.current.addEventListener("noScrollMinHeightUpdated",le),function(){X.current.removeEventListener("noScrollMinHeightUpdated",le)}},[X]),Object(r.useEffect)(function(){if(M)return M.current.addEventListener("scroll",ce),function(){M.current.removeEventListener("scroll",ce)}},[M]),a.a.createElement(Be.Motion,{style:C?it:at},function(e){var t=e.scale,r=e.shadow;return a.a.createElement("div",{className:"instrument-wrapper",style:Qe({},b,{width:b.width+p,height:x?b.height:b.height+f,left:C?D-z:c,top:(C?q-B:s)+(x?0:g),boxShadow:"rgba(0, 0, 0, 0.2) 0px ".concat(r,"px ").concat(2*r,"px 0px"),transform:"scale(".concat(t,")"),zIndex:C?10:1})},(k||!$)&&a.a.createElement("div",{className:"overlay",style:$?void 0:{backgroundColor:"#f0f0f0"}}),K&&a.a.createElement(Xe,{ref:{instrumentRef:X,instrumentOptionsRef:G},name:d,isPressing:C,onMouseDown:ee,onTouchStart:re,style:function(){if(!$||!n)return{};var e=n.getBoundingClientRect().height,t=G.current.getBoundingClientRect().height;return{left:-V+J,top:(e-t)/2}}(),popoutInstrument:y,closeInstrument:oe,isLargeScreen:O}),a.a.createElement(S[d],{key:v||"no-settings",ref:X,class:"instrument",bentoboxmode:"true",settings:v}),!N&&!x&&O&&l+1<u&&a.a.createElement(Ze,{className:"ns-resize-handle",onResize:function(e){var t=X.current.getBoundingClientRect(),n=t.top,r=t.bottom;e<=n+100||E({order:l,size:h,diff:e-r})},setOverlayActivated:F}))})};ot.propTypes={order:u.a.number.isRequired,originalLeft:u.a.number.isRequired,originalTop:u.a.number.isRequired,instrumentLength:u.a.number.isRequired,instrument:u.a.shape({name:u.a.string.isRequired,size:u.a.string.isRequired}).isRequired,style:u.a.object.isRequired,reorderInstruments:u.a.func.isRequired,resizeInstrument:u.a.func.isRequired,popoutInstrument:u.a.func.isRequired,isHorizontal:u.a.bool.isRequired,isLargeScreen:u.a.bool.isRequired,isPopoutMode:u.a.bool.isRequired,isSimulateMode:u.a.bool.isRequired,preconfigured:u.a.bool.isRequired,updateNoScrollMinHeight:u.a.func.isRequired,setReorderingSize:u.a.func.isRequired,scrollContainerRef:u.a.object,hasInstrumentOptions:u.a.bool.isRequired};var lt=ot;function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){st(e,t,n[t])})}return e}function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var mt=function(e){var t=e.instruments,n=e.order,r=e.style,i=e.reorderInstruments,o=e.resizeInstrument,l=e.popoutInstrument,c=e.isHorizontal,s=e.isLargeScreen,u=e.isPopoutMode,m=e.isSimulateMode,d=e.preconfiguredSet,h=e.updateNoScrollMinHeight,p=e.setReorderingSize,f=e.scrollContainerRef,g=e.hasInstrumentOptions,v=t.length,b=Object.entries(n).reduce(function(e,t){var n=ut(t,2),r=n[0];return e[n[1]]=parseInt(r),e},{});return a.a.createElement(a.a.Fragment,null,t.map(function(e){var t=e.name,w=e.size,E=b[t],y=c?"large"===w?n.slice(0,E).reduce(function(e,t){return e+r.width[t]},0):E*r.width:0,S=c?0:n.slice(0,E).reduce(function(e,t){return e+r.height[t]},0);return a.a.createElement(lt,{key:t,order:E,originalLeft:y,originalTop:S,instrumentLength:v,instrument:e,style:ct({},r,"large"===w?{width:r.width[t],height:r.height[t]}:{height:r.height[t]}),reorderInstruments:i,resizeInstrument:o,popoutInstrument:function(t){var n=ct({},e,{settings:t});l({instrument:n})},isHorizontal:c,isLargeScreen:s,isPopoutMode:u,isSimulateMode:m,preconfigured:d.has(t),updateNoScrollMinHeight:h,setReorderingSize:p,scrollContainerRef:f,hasInstrumentOptions:g})}))};mt.propTypes={instruments:u.a.array.isRequired,order:u.a.array.isRequired,style:u.a.object.isRequired,reorderInstruments:u.a.func.isRequired,resizeInstrument:u.a.func.isRequired,popoutInstrument:u.a.func.isRequired,isHorizontal:u.a.bool.isRequired,isLargeScreen:u.a.bool.isRequired,isPopoutMode:u.a.bool.isRequired,isSimulateMode:u.a.bool.isRequired,preconfiguredSet:u.a.object.isRequired,updateNoScrollMinHeight:u.a.func.isRequired,setReorderingSize:u.a.func.isRequired,scrollContainerRef:u.a.object,hasInstrumentOptions:u.a.bool.isRequired},mt.defaultProps={isHorizontal:!1,isPopoutMode:!1};var dt=mt,ht="indication-arrow-up-usage";function pt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){gt(e,t,n[t])})}return e}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var bt=Object.entries({bode:{width:1024,height:652},dmm:{width:320,height:568},fgen:{width:320,height:452},ia:{width:1024,height:652},iv:{width:1024,height:652},logic:{width:1024,height:652},scope:{width:1024,height:652},vps:{width:320,height:455},datalogger:{width:1024,height:652},datagenerator:{width:320,height:560},digitalio:{width:320,height:460}}).reduce(function(e,t){var n=vt(t,2),r=n[0],a=n[1];return e[r]={width:a.width+4,height:a.height+4},e},{}),wt=A()?0:8,Et=Object.freeze({bode:429,iv:429,scope:548}),yt={widthDiff:0,heightDiff:0,leftDiff:0,topDiff:0},St={large:{width:{bode:bt.bode.width,iv:bt.iv.width,scope:bt.scope.width,datalogger:bt.datalogger.width},height:{bode:bt.bode.height,iv:bt.iv.height,scope:bt.scope.height,datalogger:bt.datalogger.height}},small:{width:324,height:{dmm:434,fgen:434,vps:434,datagenerator:434,digitalio:434}},largeWrapper:{width:Object.entries(Et).reduce(function(e,t){var n=vt(t,2),r=(n[0],n[1]);return Math.max(e,r)},0),height:656,isHorizontal:!0},smallWrapper:{width:324,height:434,isHorizontal:!1}},xt=function(e){var t=e.instruments,n=e.largeInstrumentTotalWidth,r=e.isLargeScreen,a=e.isLargeHorizontal;if(!r||!a||1===t.length)return t.reduce(function(e,t){return e[t.name]=n,e},{});var i=t.map(function(e){var t=e.name;return{name:t,width:Et[t]}}).sort(function(e,t){return t-e}),o={},l=(n-i.reduce(function(e,t){return e+t.width},0))/t.length,c=!0,s=!1,u=void 0;try{for(var m,d=i[Symbol.iterator]();!(c=(m=d.next()).done);c=!0){var h=m.value,p=h.name,f=h.width;o[p]=f+l}}catch(e){s=!0,u=e}finally{try{c||null==d.return||d.return()}finally{if(s)throw u}}return o},Ot=function(e){var t=e.instruments,n=e.wrapperHeight,r=e.noScrollMinHeightMap;if(e.isLargeHorizontal)return[t.reduce(function(e,t){return e[t.name]=n,e},{}),n];var a=t.reduce(function(e,t){var n=t.name;return Math.max(e,bt[n].height)},0);return t.reduce(function(e,t){var n=vt(e,2),i=n[0],o=n[1],l=t.name;return i[l]=r[l]?Math.max(a,r[l]+4):a,[i,o+i[l]]},[{},0])},Nt=function(e){var t=e.instruments,n=e.wrapperHeight,r=e.noScrollMinHeightMap;return e.isSmallHorizontal?[t.reduce(function(e,t){return e[t.name]=n,e},{}),n]:t.reduce(function(e,t){var n=vt(e,2),a=n[0],i=n[1],o=t.name;return a[o]=r[o]?r[o]+4:bt[o].height,[a,i+a[o]]},[{},0])},Rt=function(e){var t=e.setStyles,n=e.large,r=e.small,a=e.wrapperWidth,i=e.wrapperHeight,o=e.noScrollMinHeightMap,l=Object(h.cloneDeep)(St);t({large:{width:ft({},l.large.width,xt({instruments:n,largeInstrumentTotalWidth:a,isLargeScreen:!1,isLargeHorizontal:!1})),height:ft({},l.large.height,Ot({instruments:n,wrapperHeight:i,noScrollMinHeightMap:o,isLargeHorizontal:!0})[0])},largeWrapper:{width:a,height:Object(h.isEmpty)(n)?0:i,isHorizontal:!1},small:{width:a,height:ft({},l.small.height,Nt({instruments:r,wrapperHeight:i,noScrollMinHeightMap:o,isSmallHorizontal:!0})[0])},smallWrapper:{width:a,height:Object(h.isEmpty)(r)?0:i,isHorizontal:!1}})},jt=function(e,t,n,r,a){var i=n.current.getBoundingClientRect(),o=i.width,l=i.height,c=e.large,s=e.small,u={setStyles:t,large:c,small:s,wrapperWidth:o,wrapperHeight:l,noScrollMinHeightMap:a};r?Rt(u):o>699?Object(h.isEmpty)(c)?function(e){var t=e.setStyles,n=e.small,r=e.wrapperWidth,a=e.wrapperHeight,i=e.noScrollMinHeightMap,o=Object(h.cloneDeep)(St);o.largeWrapper={width:0,height:0,isHorizontal:!1};var l=r>=324*n.length;o.smallWrapper={width:r,height:a,isHorizontal:l};var c=vt(Nt({instruments:n,wrapperHeight:a,noScrollMinHeightMap:i,isSmallHorizontal:l}),1)[0];o.small={width:324,height:ft({},o.small.height,c)},t(o)}(u):Object(h.isEmpty)(s)?function(e){var t=e.setStyles,n=e.large,r=e.wrapperWidth,a=e.wrapperHeight,i=e.noScrollMinHeightMap,o=Object(h.cloneDeep)(St);o.smallWrapper={width:0,height:0,isHorizontal:!1};var l=1===n.length||r>=n.reduce(function(e,t){return e+Et[t.name]},0),c=vt(Ot({instruments:n,wrapperHeight:a,noScrollMinHeightMap:i,isLargeHorizontal:l}),2),s=c[0],u=c[1],m=xt({instruments:n,largeInstrumentTotalWidth:!l&&u>a?r-wt:r,isLargeScreen:!0,isLargeHorizontal:l});o.large={width:ft({},o.large.width,m),height:ft({},o.large.height,s)},o.largeWrapper={width:r,height:a,isHorizontal:l},t(o)}(u):function(e){var t=e.setStyles,n=e.large,r=e.small,a=e.wrapperWidth,i=e.wrapperHeight,o=e.noScrollMinHeightMap,l=Object(h.cloneDeep)(St),c=vt(Nt({instruments:r,wrapperHeight:i,noScrollMinHeightMap:o,isSmallHorizontal:1===r.length}),2),s=c[0],u=c[1]>i?324+wt:324;l.small={width:324,height:ft({},l.small.height,s)},l.smallWrapper={width:u,height:i,isHorizontal:!1};var m=1===n.length||a-u>=n.reduce(function(e,t){return e+Et[t.name]},0),d=vt(Ot({instruments:n,wrapperHeight:i,noScrollMinHeightMap:o,isLargeHorizontal:m}),2),p=d[0],f=d[1],g=a-u,v=xt({instruments:n,largeInstrumentTotalWidth:!m&&f>i?g-wt:g,isLargeScreen:!0,isLargeHorizontal:m});l.large={width:ft({},l.large.width,v),height:ft({},l.large.height,p)},l.largeWrapper={width:g,height:i,isHorizontal:m},t(l)}(u):function(e){var t=e.setStyles,n=e.large,r=e.small,a=e.wrapperWidth,i=e.wrapperHeight,o=e.noScrollMinHeightMap;if(r.length+n.length===1)Rt({setStyles:t,large:n,small:r,wrapperWidth:a,wrapperHeight:i});else{var l=Object(h.cloneDeep)(St),c=vt(Ot({instruments:n,wrapperHeight:i,noScrollMinHeightMap:o,isLargeHorizontal:!1}),2),s=c[0],u=c[1],m=vt(Nt({instruments:r,wrapperHeight:i,noScrollMinHeightMap:o,isSmallHorizontal:!1}),2),d=m[0],p=m[1],f=p+u>i?a-wt:a;l.large={width:ft({},l.large.width,xt({instruments:n,largeInstrumentTotalWidth:f,isLargeScreen:!1,isLargeHorizontal:!1})),height:ft({},l.large.height,s)},l.largeWrapper={width:a,height:u,isHorizontal:!1},l.small={height:ft({},l.small.height,d),width:f},l.smallWrapper={width:a,height:p,isHorizontal:!1},t(l)}}(u)},It=function(e){var t=e.setSettings,n=vt(Object(r.useReducer)(function(e,t){switch(t.type){case"SET_INSTRUMENTS":return function(e,t){var n=e.instruments.large.filter(function(e){return!t.instrumentsToRemove.has(e.name)}).map(function(e){return ft({},e,yt)}),r=e.instruments.small.filter(function(e){return!t.instrumentsToRemove.has(e.name)}).map(function(e){return ft({},e,yt)}),a=Object.keys(e.childWindows).filter(function(e){return!t.instrumentsToRemove.has(e)}),i=new Set(n.map(function(e){return e.name})),o=new Set(r.map(function(e){return e.name})),l=t.instrumentsToAdd.filter(function(e){return!i.has(e.name)&&"large"===e.size}),s=t.instrumentsToAdd.filter(function(e){return!o.has(e.name)&&"small"===e.size});return ft({},e,{instruments:{large:pt(n).concat(pt(l)),small:pt(r).concat(pt(s)),poppedOut:e.instruments.poppedOut.filter(function(e){return!t.instrumentsToRemove.has(e.name)}).map(function(e){return ft({},e,yt)})},order:ft({},e.order,{large:pt(e.order.large.filter(function(e){return i.has(e)})).concat(pt(l.map(function(e){return e.name}))),small:pt(e.order.small.filter(function(e){return o.has(e)})).concat(pt(s.map(function(e){return e.name})))}),childWindows:Object(c.pick)(e.childWindows,a)})}(e,t);case"REORDER_INSTRUMENTS":return function(e,t){var n=t.dragIdx,r=t.dropIdx,a=t.size,i=e.instruments[a].reduce(function(e,t){var n=t.name,r=t.widthDiff,a=t.heightDiff,i=t.leftDiff,o=t.topDiff;return e[n]={widthDiff:r,heightDiff:a,leftDiff:i,topDiff:o},e},{}),o=pt(e.order[a]),l=o[n];o.splice(n,1),o.splice(r,0,l);var c=Math.min(n,r),s=o[Math.max(n,r)],u=o[c],m=ft({},i[s]),d=ft({},i[u]);return i[s]=ft({},m,{topDiff:m.topDiff+d.heightDiff}),i[u]=ft({},d,{topDiff:m.topDiff}),ft({},e,{instruments:ft({},e.instruments,gt({},a,e.instruments[a].map(function(e){return ft({},e,i[e.name])}))),order:ft({},e.order,gt({},a,o))})}(e,t);case"RESIZE_INSTRUMENT":return function(e,t){var n=t.size,r=t.order,a=t.diff,i=pt(e.instruments[n]),o=pt(e.order[n]),l=i.find(function(e){return e.name===o[r]}),c=i.find(function(e){return e.name===o[r+1]});return l.heightDiff+=a,c.heightDiff-=a,c.topDiff+=a,ft({},e,{instruments:ft({},e.instruments,gt({},n,i))})}(e,t);case"POPOUT_INSTRUMENT":return function(e,t){var n,r=t.instrument,a=t.childWindow,i=r.name,o=r.size;return ft({},e,{instruments:ft({},e.instruments,(n={},gt(n,o,e.instruments[o].filter(function(e){return e.name!==i}).map(function(e){return ft({},e,yt)})),gt(n,"poppedOut",pt(e.instruments.poppedOut).concat([r])),n)),order:ft({},e.order,gt({},o,e.order[o].filter(function(e){return e!==i}))),childWindows:ft({},e.childWindows,gt({},i,a))})}(e,t);case"SET_INSTRUMENTS_ORDER":return function(e,t){return ft({},e,{order:t.order})}(e,t);case"SET_PRECONFIGURED_SET":return function(e,t){return ft({},e,{preconfiguredSet:t.preconfiguredSet})}(e,t);case"SET_INSTRUMENTS_INITIAL_SETTINGS":return function(e,t){var n=e.instruments,r=n.large,a=n.small,i=n.poppedOut,o=t.settingsMap;return ft({},e,{instruments:{large:r.map(function(e){return ft({},e,{settings:o[e.name]})}),small:a.map(function(e){return ft({},e,{settings:o[e.name]})}),poppedOut:i.map(function(e){return ft({},e,{settings:o[e.name]})})}})}(e,t);default:return e}},{instruments:{large:[],small:[],poppedOut:[]},order:{large:[],small:[]},preconfiguredSet:new Set,childWindows:{}}),2),a=n[0],i=n[1];t({instrumentData:Object(h.cloneDeep)(Object(c.pick)(a,["instruments","order","childWindows"]))});var o=function(e){var t=e.instrumentsToAdd,n=void 0===t?[]:t,r=e.instrumentsToRemove,a=void 0===r?new Set:r;return i({type:"SET_INSTRUMENTS",instrumentsToAdd:n,instrumentsToRemove:a})},l=pt(a.instruments.large).concat(pt(a.instruments.small),pt(a.instruments.poppedOut)),s=new Set(l.map(function(e){return e.name}));return{instrumentData:a,reorderInstruments:function(e){var t=e.dragIdx,n=e.dropIdx,r=e.size;return i({type:"REORDER_INSTRUMENTS",dragIdx:t,dropIdx:n,size:r})},resizeInstrument:function(e){var t=e.size,n=e.order,r=e.diff;return i({type:"RESIZE_INSTRUMENT",size:t,order:n,diff:r})},popoutInstrument:function(e){var t=e.instrument,n=t.name,r=t.originalWidth,a=t.originalHeight,o=t.settings,l=window.open("".concat(location.origin).concat(location.pathname,"?popped-out=true&instrument=").concat(n,"&instrument-setting=").concat(encodeURIComponent(o),"&parent-window-origin=").concat(location.origin,"&display-name=").concat(n),"_blank","height=".concat(a,",width=").concat(r,",status=no,toolbar=no,menubar=no,location=no"));i({type:"POPOUT_INSTRUMENT",instrument:t,childWindow:l})},setInstrumentsOrder:function(e){var t=e.order;return i({type:"SET_INSTRUMENTS_ORDER",order:t})},setPreconfiguredSet:function(e){var t=e.preconfiguredSet;return i({type:"SET_PRECONFIGURED_SET",preconfiguredSet:t})},addInstrument:function(e,t){if(s.has(e)){var n=a.childWindows;Object.keys(n).find(function(t){return t===e})&&n[e].focus()}else{var r=bt[e],i=r.width,l=r.height;o({instrumentsToAdd:[ft({size:i>800?"large":"small",name:e,originalWidth:i,originalHeight:l},yt,{settings:t})]})}},removeInstrument:function(e){if(s.has(e)){o({instrumentsToRemove:new Set([e])});var t=a.childWindows[e];t&&t.close()}},setInstrumentsInitialSettings:function(e){return i({type:"SET_INSTRUMENTS_INITIAL_SETTINGS",settingsMap:e})}}},Tt=function(e){var t,n=e.bentoBoxRoot,i=e.initialSettings,o=e.setSettings,l=vt(Object(r.useState)(!1),2),c=l[0],s=l[1],u=vt(Object(r.useState)(!1),2),m=u[0],p=u[1],f=vt(Object(r.useState)(!1),2),g=f[0],v=f[1],b=vt(Object(r.useState)(null),2),w=b[0],E=b[1],y=vt(Object(r.useState)(!0),2),S=y[0],x=y[1],O=Object(r.useRef)(),N=Object(r.useRef)(),R=Object(r.useRef)(),j=It({setSettings:o}),I=j.instrumentData,T=I.instruments,M=I.order,P=I.preconfiguredSet,A=I.childWindows,L=j.reorderInstruments,k=j.resizeInstrument,C=j.popoutInstrument,D=j.setInstrumentsOrder,q=j.setPreconfiguredSet,z=j.addInstrument,B=j.removeInstrument,H=j.setInstrumentsInitialSettings,U=vt(function(){var e=vt(Object(r.useReducer)(function(e,t){switch(t.type){case"SET_STYLES":return ft({},e,t.styles);default:return e}},St),2),t=e[0],n=e[1];return[t,function(e){return n({type:"SET_STYLES",styles:e})}]}(),2),_=U[0],F=U[1],W=vt(function(){var e=vt(Object(r.useReducer)(function(e,t){return(e=ft({},e))[t.name]=t.noScrollMinHeight,e},{}),2),t=e[0],n=e[1];return[t,function(e,t){return n({name:e,noScrollMinHeight:t})}]}(),2),V=W[0],Y=W[1],X=new URLSearchParams(location.search),G="true"===X.get("popped-out"),J="true"===X.get("simulate"),K=function(e){if("true"!==e.get("popped-out"))return{name:null,settings:""};var t=e.get("instrument-setting")||"";return{name:e.get("instrument"),settings:decodeURIComponent(t)}}(X),$=K.name,Z=K.settings;Object(r.useEffect)(function(){if(c&&(G||g&&m))if($)z($,Z);else if(!Object(h.isEmpty)(i)){var e=i.instrumentData,t=e.instruments,n=t.large,r=t.small,a=t.poppedOut,o=e.order,l=e.instrumentsInitialSettingsMap,s=void 0===l?{}:l,u=i.hasInstrumentOptions;x(!!u);var d=O.current.closest(".bentobox-wrapper").querySelector(".toolbar #instrument1").shadowRoot.querySelector("#instrument-tab");q({preconfiguredSet:new Set(pt(n).concat(pt(r),pt(a)).map(function(e){return e.name}))}),Promise.all(pt(n).concat(pt(r)).map(function(e){return d.openInstrumentWithName(e.name)})).then(function(){H(s),D({order:o})}).then(function(){var e=!0,t=!1,n=void 0;try{for(var r,i=function(){var e=r.value;d.openInstrumentWithName(e.name).then(function(){d.setListItemPopoutIconVisibleWithName(e.name,!0),C({instrument:e})})},o=a[Symbol.iterator]();!(e=(r=o.next()).done);e=!0)i()}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}})}},[c,g,m]),Object(r.useEffect)(function(){G||J||!g||window.NationalInstruments.measurementsLive.onDevice||!Object(h.isEmpty)(i)||(O.current.closest(".bentobox-wrapper").querySelector(".toolbar device-button").$.button.open=!0)},[g]),Object(r.useEffect)(function(){!G&&J&&m&&!window.NationalInstruments.measurementsLive.onDevice&&(O.current.closest(".bentobox-wrapper").querySelector(".toolbar #instrument1").$.button.open=!0)},[m]),Object(r.useEffect)(function(){if(O&&!Object(h.isEmpty)(A)){var e=setInterval(function(){for(var e=Object.entries(A),t=0;t<e.length;t++){var n=vt(e[t],2),r=n[0];if(n[1].closed)O.current.closest(".bentobox-wrapper").querySelector(".toolbar #instrument1").shadowRoot.querySelector("#instrument-tab").closeInstrumentWithName(r)}},500);return function(){clearInterval(e)}}},[A]),Object(r.useEffect)(function(){if(c){window.NationalInstruments.measurementsLive.bentoBoxUtils={addInstrument:function(e){return z(e.instrumentName)},removeInstrument:function(e){return B(e.instrumentName)}};var e=function(){!function(e,t,n){var r=e.getBoundingClientRect().height;t.current.style.height="".concat(r-40-(n?0:48),"px")}(n,O,G),jt(T,F,O,G,V),R.current&&function(e,t){var n=e.current.closest(".bentobox-wrapper").querySelector(".toolbar #instrument1").getBoundingClientRect(),r=n.left,a=n.right,i=n.width,o=n.bottom,l=t.current;l.style.display="flex",l.style.right="".concat(a,"px"),l.style.top="".concat(o,"px"),l.style.left="".concat(r-(250-i)/2,"px")}(O,R)};return e(),n.addEventListener("resize",e),function(){n.removeEventListener("resize",e)}}},[c,m,T,V]),O.current&&(t=O.current.getBoundingClientRect());var Q=!!t&&t.width>699,ee=!Object(h.isEmpty)(T.large),te=!Object(h.isEmpty)(T.small),ne=ee||te,re=ee&&te;return a.a.createElement("div",{className:"bentobox-wrapper"},!G&&m&&!ne&&!J&&a.a.createElement("div",{ref:R,className:"indicator-arrow"},a.a.createElement("img",{src:"".concat(window.NationalInstruments.bentoBox.svgSpriteUrl+ht)}),a.a.createElement("div",{className:"text"},"Click here"),a.a.createElement("div",{className:"text"},"to add instruments")),a.a.createElement(ze,{isPopoutMode:G,isSimulateMode:J,scriptLoaded:c,setScriptLoaded:s,setInstrumentsTabLoaded:p,setDeviceTabLoaded:v,instruments:T,isLargeScreen:Q}),a.a.createElement("div",{ref:O,className:d()({"instruments-wrapper":!0,"multi-size":re})},a.a.createElement("div",{ref:N,className:"large-instruments",style:{height:_.largeWrapper.height,width:_.largeWrapper.width,overflowY:"large"===w||_.largeWrapper.isHorizontal?"unset":"auto",overflowX:"large"===w||_.largeWrapper.isHorizontal?"unset":"hidden"}},a.a.createElement("div",{className:d()({"reordering-overlay":!0,"is-reordering":"large"===w,active:null!==w})}),a.a.createElement(dt,{instruments:T.large,style:_.large,order:M.large,reorderInstruments:L,resizeInstrument:k,popoutInstrument:C,isHorizontal:_.largeWrapper.isHorizontal,isLargeScreen:Q,isPopoutMode:G,isSimulateMode:J,preconfiguredSet:P,updateNoScrollMinHeight:Y,setReorderingSize:E,scrollContainerRef:Q?N:O,hasInstrumentOptions:S})),a.a.createElement("div",{className:"small-instruments",style:{height:_.smallWrapper.height,width:_.smallWrapper.width,overflowY:"small"===w||_.smallWrapper.isHorizontal?"unset":"auto",overflowX:"small"===w||_.smallWrapper.isHorizontal?"unset":"hidden"}},a.a.createElement("div",{className:d()({"reordering-overlay":!0,"is-reordering":"small"===w,active:null!==w})}),a.a.createElement(dt,{instruments:T.small,style:_.small,order:M.small,reorderInstruments:L,resizeInstrument:k,popoutInstrument:C,isHorizontal:_.smallWrapper.isHorizontal,isLargeScreen:Q,isPopoutMode:G,isSimulateMode:J,preconfiguredSet:P,updateNoScrollMinHeight:Y,setReorderingSize:E,hasInstrumentOptions:S}))))};Tt.propTypes={bentoBoxRoot:u.a.object.isRequired,initialSettings:u.a.object.isRequired,setSettings:u.a.func.isRequired},Tt.defaultProps={bentoBoxRoot:document.getElementById("bentobox-root"),initialSettings:{}};var Mt=Tt;function Pt(e){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Lt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qt(e){var t="function"==typeof Map?new Map:void 0;return(qt=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return zt(e,arguments,Ht(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Bt(r,e)})(e)}function zt(e,t,n){return(zt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&Bt(a,n.prototype),a}).apply(null,arguments)}function Bt(e,t){return(Bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ht(e){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}if(window.NationalInstruments=window.NationalInstruments||{},window.NationalInstruments.bentoBox=window.NationalInstruments.bentoBox||{},window.NationalInstruments.measurementsLive=window.NationalInstruments.measurementsLive||{},void 0===window.NationalInstruments.bentoBox.rootUrl){var Ut=document.scripts[document.scripts.length-1].src.split("/");Ut.pop(),window.NationalInstruments.bentoBox.rootUrl=Ut.join("/"),Ut.pop(),Ut.push("cdn"),window.NationalInstruments.measurementsLive.rootUrl=Object({}).LOBBYBAR_ROOT_URL?"".concat(document.location.origin).concat(Object({}).LOBBYBAR_ROOT_URL):Ut.join("/")}window.NationalInstruments.bentoBox.svgSpriteUrl="".concat(window.NationalInstruments.bentoBox.rootUrl,"/images/sprite.svg#"),document.documentElement.classList.toggle("isMobile",A()),window.customElements.define("measurements-live-bento-box",function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(r=Ht(t).call(this))||"object"!==Pt(r)&&"function"!=typeof r?Dt(n):r)._settings={},e.resizeBentoBoxRoot=e.resizeBentoBoxRoot.bind(Dt(Dt(e))),e._setSettings=e._setSettings.bind(Dt(Dt(e))),e.getSettings=e.getSettings.bind(Dt(Dt(e))),e.getSnapshots=e.getSnapshots.bind(Dt(Dt(e))),e.getDataExport=e.getDataExport.bind(Dt(Dt(e))),e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bt(e,t)}(t,qt(HTMLElement)),n=t,(r=[{key:"connectedCallback",value:function(){var e=new URLSearchParams(location.search),t=JSON.parse(e.get("settings"));t=null===t?this.getAttribute("settings")?JSON.parse(this.getAttribute("settings")):{}:t,this.classList.add("bentobox-root"),o.a.render(a.a.createElement(l.MuiThemeProvider,{theme:Object(l.createMuiTheme)({typography:{useNextVariants:!0},transitions:{create:function(){return"none"}},props:{MuiButtonBase:{disableRipple:!0}}})},a.a.createElement(Mt,{bentoBoxRoot:this,initialSettings:t,setSettings:this._setSettings})),this),this.resizeBentoBoxRoot(),window.addEventListener("resize",this.resizeBentoBoxRoot)}},{key:"resizeBentoBoxRoot",value:function(){var e=this.getAttribute("width")||document.documentElement.clientWidth.toString(),t=this.getAttribute("height")||document.documentElement.clientHeight.toString();this.style.width="".concat(e,"px"),this.style.height="".concat(t,"px"),this.style.overflow="hidden",this.dispatchEvent(new Event("resize"))}},{key:"_setSettings",value:function(e){this._settings=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){kt(e,t,n[t])})}return e}({},this._settings,e)}},{key:"getSettings",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._settings.instrumentData,n=t.instruments,r=n.large,a=n.small,i=n.poppedOut,o=t.order,l=t.childWindows,c=this.querySelector(".bentobox-wrapper .instruments-wrapper"),s={},u=Lt(r).concat(Lt(a)),m=0;m<u.length;m++){var d=u[m],h=c.querySelector(S[d.name]);if(!h.serialize)return;s[d.name]=h.serialize()}for(var p=Object.entries(l),f=0;f<p.length;f++){var g=At(p[f],2),v=g[0],b=g[1].querySelector(S[v]);if(!b.serialize)return;s[v]=b.serialize()}var w={instrumentData:{instruments:{large:r,small:a,poppedOut:i},order:o,instrumentsInitialSettingsMap:s}};return e?JSON.stringify(w):w}},{key:"getSnapshots",value:function(e){if(!Array.isArray(e))throw Error("A list of instrument names must be provided to getSnapshots");var t=this.querySelector(".bentobox-wrapper .instruments-wrapper"),n=j(),r=n.year,a=n.month,i=n.day,o=n.hour,l=n.minute,c=n.second,s="".concat(a,"/").concat(i,"/").concat(r),u="".concat(o,":").concat(l,":").concat(c);return Promise.all(e.map(function(e){var n=t.querySelector(S[e]);return n&&n.getMeasurementsData?Promise.all([n.getMeasurementsData()]).then(function(t){var n=At(t,1)[0];return ee(n,e,s,u)}).then(function(e){var t=e.canvas,n=e.name;return new Promise(function(e){t.toBlob(function(t){return e({name:n,blob:t})})})}):Promise.resolve(null)})).then(function(e){var t={},n=!0,r=!1,a=void 0;try{for(var i,o=e.filter(function(e){return null!=e})[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value,c=l.name,s=l.blob;t[c]=s}}catch(e){r=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return t})}},{key:"getDataExport",value:function(e){if(!Array.isArray(e))throw Error("A list of export entries names must be provided to getDataExport");var t=this.querySelector(".bentobox-wrapper .instruments-wrapper");return Promise.all(Array.from(e).map(function(e){var n=e.name,r=e.format,a=t.querySelector(S[n]);return a.exportDataAsync?Promise.all([n,r,a.exportDataAsync(O[r],n)]):Promise.resolve(null)})).then(function(e){return e.filter(function(e){return null!=e})}).then(function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=At(i.value,3),c=l[0],s=l[1],u=l[2];t.push([c,s,u])}}catch(e){r=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}return t})}}])&&Ct(n.prototype,r),i&&Ct(n,i),t}())}});
//# sourceMappingURL=main.js.map